webpackJsonp([1],{"+eB9":function(e,t){},NHnr:function(e,t,n){"use strict";function o(){var e=l.getWorldDirection();e.multiplyScalar(.3),w[87]&&l.position.add(e),w[65],w[83]&&l.position.add(e.multiplyScalar(-1)),w[68],l.setRotationFromQuaternion(new a.h(0,0,0,1)),l.rotateOnWorldAxis(new a.k(1,0,0),p),l.rotateOnWorldAxis(new a.k(0,1,0),m),s.render(d,l),window.requestAnimationFrame(f)}function r(e){h&&(m-=e.movementX/1e3,p-=e.movementY/1e3),h=e.offsetX,e.offsetY}Object.defineProperty(t,"__esModule",{value:!0});var i=n("7+uW"),a=n("Ml+6"),s=void 0,d=void 0,l=void 0,u=void 0,c=void 0,v=void 0,p=-.8,m=0,f=o,w=[],h=void 0,y={name:"LevelView3D",props:["world"],watch:{world:function(e){!function(e){(l=new a.g(70,1,1,1e3)).position.z=50,l.position.y=50,l.rotation.x=-.8,d=new a.i;var t=new a.b(1,1,1),n=new a.b(2,2,2),o=new a.f({color:16777215,shading:a.j}),r=new a.f({color:16716049,shading:a.j});(c=new a.c(16777181,.5)).position.set(-10,300.75,500),d.add(c),v=new a.a(16777215,.5),d.add(v),u=new a.d,e.things.forEach(function(e){var i=void 0;(i=0===e.type.indexOf("StructureFrame",0)?new a.e(n,o):new a.e(t,r)).position.x=e.pos.x,i.position.y=e.pos.y,i.position.z=e.pos.z,u.add(i)}),d.add(u)}(e),window.requestAnimationFrame(o),!0}},mounted:function(){window.onkeyup=function(e){w[e.keyCode]=!1},window.onkeydown=function(e){w[e.keyCode]=!0},(s=new a.l).setPixelRatio(window.devicePixelRatio),s.setSize(600,600),this.$el.appendChild(s.domElement),s.domElement.oncontextmenu=function(e){return!1},s.domElement.onmousedown=function(e){return 2===e.button&&(s.domElement.requestPointerLock(),document.addEventListener("mousemove",r,!1)),!1},s.domElement.onmouseup=function(e){return document.exitPointerLock(),document.removeEventListener("mousemove",r,!1),!1}}},L={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"level-view"})},staticRenderFns:[]},_=n("VU/8")(y,L,!1,function(e){n("raOE")},"data-v-9cc4a96c",null).exports,x=n("Zrlr"),S=n.n(x),g=n("wxAW"),b=n.n(g),E=function(){function e(){S()(this,e)}return b()(e,null,[{key:"createWorldFromXML",value:function(e){var t={};t.dom=e,t.things=[];var n=e.querySelectorAll("ThingSaveData");return n.forEach(function(e){var n=e.querySelector("WorldPosition"),o=e.querySelector("CustomName"),r={dom:e,type:e.querySelector("PrefabName").innerHTML,name:o.innerHTML,pos:{x:1*n.querySelector("x").innerHTML,y:1*n.querySelector("y").innerHTML,z:1*n.querySelector("z").innerHTML}};t.things.push(r)}),t.title=n.length+" loaded things.",t}}]),e}(),W={name:"LevelLoadSave",props:["world"],data:function(){return{loadWorld:function(e){var t=e.target,n=t.files[0],o=new FileReader;n&&(o.onload=function(e){var n=(new DOMParser).parseFromString(e.target.result,"text/xml"),o=E.createWorldFromXML(n);document.bus.$emit("world-loaded",o),t.value=""},o.readAsText(n))},saveWorld:function(){new XMLSerializer}}}},F={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"loadsave"}},[t("label",{staticClass:"button"},[t("input",{attrs:{type:"file",name:"file"},on:{change:this.loadWorld}}),this._v("\n    Load World\n  ")]),this._v(" "),t("div",{staticClass:"button",on:{click:this.saveWorld}},[this._v("\n    Save Copy of World\n  ")]),this._v(" "),t("div",[this.world?t("h3",[this._v(this._s(this.world.title))]):this._e()])])},staticRenderFns:[]},M=n("VU/8")(W,F,!1,function(e){n("+eB9")},"data-v-566e5d5b",null).exports,k={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h3",[e._v("Players:")]),e._v(" "),n("ul",{staticClass:"player-list"},e._l(e.players,function(t){return n("li",[e._v("\n      "+e._s(t.name)+"\n    ")])}))])},staticRenderFns:[]},P=n("VU/8")({name:"app",props:["players"]},k,!1,function(e){n("dZVZ")},"data-v-66ab01d6",null).exports,q=n("M4fF"),C={name:"app",data:function(){return{world:void 0}},computed:{players:function(){return this.world?Object(q.filter)(this.world.things,function(e){return"Character"===e.type}):[]}},created:function(){var e=this;document.bus.$on("world-loaded",function(t){e.world=t})},components:{LevelView3D:_,LevelLoadSave:M,PlayerList:P}},R={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("div",{attrs:{id:"side-panel"}},[t("LevelLoadSave",{attrs:{world:this.world}}),this._v(" "),t("PlayerList",{attrs:{players:this.players}})],1),this._v(" "),t("div",{attrs:{id:"center"}},[t("LevelView3D",{attrs:{world:this.world}})],1)])},staticRenderFns:[]},A=n("VU/8")(C,R,!1,function(e){n("tRX1")},null,null).exports;i.a.config.productionTip=!1,document.bus=new i.a,new i.a({el:"#app",template:"<App/>",components:{App:A}})},dZVZ:function(e,t){},raOE:function(e,t){},tRX1:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.a547eb67e24af7d75279.js.map